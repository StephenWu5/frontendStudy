<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>使用arrayBuffer方法将服务器端响应数据解析为ArrayBuffer对象</title>
    <script>
        function downloadPic() {
            fetch('./2022-04-24_21-17.png')
                .then(response => response.arrayBuffer())
                .catch(error => console.error('Error:', error))
                .then(response => {
                    var bb = new Blob([response]);
                    var reader = new FileReader();
                    reader.readAsDataURL(bb);
                    reader.onload = function (f) {
                        let img = document.createElement('img');
                        img.src = this.result;
                        document.body.appendChild(img);
                    }
                });
        }
    </script>
</head>

<body>
    <h1>使用arrayBuffer方法将服务器端响应数据解析为ArrayBuffer对象</h1>
    <input type="button" value="下载图片" onclick="downloadPic()">
    <output id="result"></output>
</body>

</html>